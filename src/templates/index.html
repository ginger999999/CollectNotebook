<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>錯題本首頁</title>
</head>
<body>
    <h1>錯題本</h1>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <label>上傳試卷圖片：</label>
  <input type="file" name="file" id="fileInput" multiple required>
  <button type="submit">擷取錯題</button>
  <div id="preview" style="margin-top:10px;"></div>
    </form>
    <br>
    <a href="/random">隨機出題</a> |
    <a href="/questions">錯題資料庫</a>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
<script>
document.getElementById('fileInput').addEventListener('change', function(e) {
  const preview = document.getElementById('preview');
  preview.innerHTML = '';
  Array.from(e.target.files).forEach(file => {
    if (file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function(ev) {
        const img = document.createElement('img');
        img.src = ev.target.result;
        img.style.maxWidth = '200px';
        img.style.margin = '5px';
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);
    }
  });
});
</script>
</body>
</html>
